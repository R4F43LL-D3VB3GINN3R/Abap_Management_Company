*----------------------------------------------------------------------*
***INCLUDE Z001_LCL_EMPLOYEES.
*----------------------------------------------------------------------*
*&---------------------------------------------------------------------*
*& Class CL_EMPLOYEES
*&---------------------------------------------------------------------*
*&
*&---------------------------------------------------------------------*
CLASS CL_EMPLOYEES DEFINITION FINAL.

  PUBLIC SECTION. "TODOS OS MÉTODOS DESTA CLASSE SERÃO PÚBLICOS."

      METHODS: WORK_SHIFT         "MÉTODO PARA CÁLCULO DO BONUS SALARIAL DEVIDO AO TURNO DE TRABALHO."
      IMPORTING                   "IMPORTA  TURNO DE TRABALHO E O SALÁRIO BASE....
        WORKSHIFT TYPE ZWORKSHIFT
        LV_SAL TYPE DECIMALS
      EXPORTING                   "EXPORTA O BONUS SALARIAL."
        BONUS TYPE ZBONUS.
      

  PRIVATE SECTION. "TODOS OS ATRIBUTOS DE CLASSE ESTÃO PRIVADOS E SERVEM MAIS COMO UM GUIÃO DE TRABALHO."

    DATA: ID          TYPE ZID,          "ID DO CONTRACHEQUE."
          BRUTESAL    TYPE ZBRUTESAL,    "SALÁRIO BRUTO."
          LIQSAL      TYPE ZLIQSAL,      "SALÁRIO LÍQUIDO."
          HEALTHPLAN  TYPE ZHEALTHPLAN,  "PLANO DE SAÚDE."
          SINDICAL    TYPE ZSINDICAL,    "CONTRIBUIÇÃO SINDICAL."
          TRANSPORT   TYPE ZTRANSPORT,   "TICKET TRANSPORTE."
          EXTRAHOUR   TYPE ZEXTRAHOUR,   "HORAS EXTRAS."
          DEDUCTIONS  TYPE ZDEDUCTIONS,  "DEDUÇÕES SALARIAIS."
          SECSOCIAL   TYPE ZSECSOCIAL,   "SEGURANÇA SOCIAL."
          IRS         TYPE ZIRS,         "IMPOSTO DE RENDA."
          BONUS       TYPE ZBONUS,       "BONUS SALARIAIS."
          SUBHOLYDAYS TYPE ZSUBHOLYDAYS, "SUBSÍDIO DÉCIMO E FÉRIAS."
          NOPAYLEAVE  TYPE ZNOPAYLEAVE,  "FALTAS E ATRASOS."
          WORKSHIFT   TYPE ZWORKSHIFT.   "TURNO DE TRABALHO."

    DATA: LV_SAL TYPE DECIMALS.          "SALÁRIO BASE."

ENDCLASS.

CLASS CL_EMPLOYEES IMPLEMENTATION.

  METHOD WORK_SHIFT. "MÉTODO PARA CALCULAR BONUS SALARIAL POR TURNO."

    IF WORKSHIFT EQ 'NIGHT'.               "SE O TURNO FOR NOTURNO."
      BONUS = BONUS + ( '0.25' * LV_SAL ). "RECEBE O BONUS."
    ELSE.                                  "DO CONTRÁRIO...
      BONUS = BONUS.                       "BONUS SE MANTÉM COMO ESTÁ."
    ENDIF.                                 "ENCERRA CONDIÇÃO."

  ENDMETHOD.
  
  METHOD EXTRAHOURS.
    
    "AQUI VAMOS CALCULAR COMO O VALOR DAS HORAS EXTRAS VAI SE COMPORTAR DE ACORDO COM O TURNO TRABALHADO"

      "RECEBE O VALOR INTEIRO DAS HORAS EXTRAS.
      "RECEBE O VALOR DO SALARIO.
      
      DATA LV_VALHRS TYPE P DECIMALS 2. "VARIÁVEL RECEBE O VALOR DAS HORAS EXTRAS.

      LV_VALHRS = LV_ORDENADO / ( 8 * 22 ). "VALOR DA HORA = SALÁRIO BASE / ( 8 HORAS TRABALHADAS * 22 DIAS ÚTEIS DO MÊS).

      IF LV_TURNO = 'DIURNO'.            "SE FOR DURANTE O DIA...
        IN2_4 = IN2_4 * LV_VALHRS * 2.   "AS HORAS EXTRAS VALEM O DOBRO.
      ELSEIF LV_TURNO = 'NOTURNO'.       "SE FOR DURANTE A NOITE...
        IN2_4 = IN2_4 * LV_VALHRS * 3.   "AS HORAS EXTRAS VALEM O TRIPLO"
      ELSE.                              "EM QUALQUER OUTRO CASO...
        IN2_4 = IN2_4 * LV_VALHRS * 1.   "ELAS VALEM O QUE SÃO."
      ENDIF.

      "PARA SE CALCULAR O VALOR TOTAL DAS HORAS EXTRAS A RECEBER...
      "TOTAL DE HORAS EXTRAS = TOTAL DE HORAS EXTRAS * VALOR DA HORA DO FUNCIONÁRIO * TURNO TRABALHADO."

      LS_SAL-HORAEXTRA = IN2_4. "DIZEMOS ENTÃO QUE O VALOR TOTAL DAS HORAS EXTRAS EM MINHA ESTRUTURA RECEBE O RESULTADO CALCULADO DO PARÂMETRO."
      LS_SAL-SALBRUTO = LV_ORDENADO + LS_SAL-HORAEXTRA. "APROVEITAMOS E DIZEMOS QUE O SALÁRIO BRUTO RECEBE O SALÁRIO BASE + O VALOR DAS HORAS EXTRAS."
    
  ENDMETHOD.

ENDCLASS.
